{"remainingRequest":"/home/hatouxx/proj/learning-front/front_app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hatouxx/proj/learning-front/front_app/src/components/create_user/User_codes_v2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hatouxx/proj/learning-front/front_app/src/components/create_user/User_codes_v2.vue","mtime":1585331744308},{"path":"/home/hatouxx/proj/learning-front/front_app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hatouxx/proj/learning-front/front_app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hatouxx/proj/learning-front/front_app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hatouxx/proj/learning-front/front_app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBpbnB1dEZvcm0gZnJvbSAnLi8uLi9pbnB1dHMvaW5wdXRfZm9ybV92MScKCmNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKS5kZWZhdWx0CgoKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czoge2lucHV0Rm9ybX0sCgogICAgZGF0YSAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZW1haWxDb2RlOiAnJywKICAgICAgICAgICAgcGhvbmVDb2RlOiAnJwogICAgICAgIH0KICAgIH0sCgogICAgbWV0aG9kcyA6IHsKCiAgICAgICAgc2F2ZUNvZGVFbWFpbCAoY29kZSkgewogICAgICAgICAgICB0aGlzLmVtYWlsQ29kZSA9IGNvZGUudmFsdWUKICAgICAgICB9LAogICAgICAgIHNhdmVDb2RlUGhvbmUgKGNvZGUpIHsKICAgICAgICAgICAgdGhpcy5waG9uZUNvZGUgPSBjb2RlLnZhbHVlCiAgICAgICAgfSwKICAgICAgICAKICAgICAgICBjaGVja0NvZGVzICgpIHsKICAgICAgICAgICAgLyogCiAgICAgICAgICAgIFRPRE86IGZhaXJlIGVuIHNvcnRlIGRlIHZlcmlmaWVyIGxlIHRva2VuIGV0IGxlcyBjb2Rlcy4KICAgICAgICAgICAgICAgICAgU2kgY29kZXMgPT09IE9LID0+IGNyZWF0aW9uIGR1IHVzZXIgcGx1cyBnbyBwYWdlIHN1aXZhbnRlCiAgICAgICAgICAgICovCiAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCdjb25maXJtYXRpb24nKTsKICAgICAgICB9LAoKICAgICAgICBjaGVja0NvZGVzMiAoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbiBlbnRyZSBkYW5zIGNoZWNrQ29kZTInKTsKICAgICAgICAgICAgYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0QWRkciArICc6JyArIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UG9ydCArICcvYXBpL3VzZXIvc2lnbnVwJywKICAgICAgICAgICAgICAgIGRhdGE6ICB7CiAgICAgICAgICAgICAgICAgICAgLy8gcmVjdXBlcmVyIGxlcyBpbmZvcyBkdSBzdG9yZQogICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEVtYWlsLAogICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBob25lLAogICAgICAgICAgICAgICAgICAgIHBob25lQ29kZTogdGhpcy5waG9uZUNvZGUsCiAgICAgICAgICAgICAgICAgICAgZW1haWxDb2RlOiB0aGlzLmVtYWlsQ29kZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCgnL2NyZWF0ZS91c2VyL3ZlcmlmaWNhdGlvbicpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAvLyBUT0RPIDogYWZmaWNoZXIgdW5lIGVycmV1ciBwb3VyIGxlIGNsaWVudAogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOyAgICAgICAgICAgIAogICAgICAgICAgICB9KQogICAgICAgIH0KCiAgICB9Cgp9Cg=="},{"version":3,"sources":["User_codes_v2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"User_codes_v2.vue","sourceRoot":"src/components/create_user","sourcesContent":["<template>\n    <div class=\"form-data\"  >\n\n        <input-form input-id=\"codemail\" input-type=\"text\" \n            info-label=\"Code reçu par email\" \n            event=\"codemail\" @codemail=\"saveCodeEmail\" >\n        </input-form>\n\n        <input-form input-id=\"codephone\" input-type=\"text\" \n            info-label=\"Code reçu par téléphone\" \n            event=\"codephone\" @codephone=\"saveCodePhone\" >\n        </input-form>\n\n        <button class=\"form-button-ok\" @click=\"checkCodes2()\">\n            <p>Suivant</p>\n        </button>\n    </div>\n\n</template>\n\n<script>\nimport inputForm from './../inputs/input_form_v1'\n\nconst axios = require('axios').default\n\n\nexport default {\n    components: {inputForm},\n\n    data () {\n        return {\n            emailCode: '',\n            phoneCode: ''\n        }\n    },\n\n    methods : {\n\n        saveCodeEmail (code) {\n            this.emailCode = code.value\n        },\n        saveCodePhone (code) {\n            this.phoneCode = code.value\n        },\n        \n        checkCodes () {\n            /* \n            TODO: faire en sorte de verifier le token et les codes.\n                  Si codes === OK => creation du user plus go page suivante\n            */\n           \n            this.$router.push('confirmation');\n        },\n\n        checkCodes2 () {\n            console.log('on entre dans checkCode2');\n            axios({\n                method: 'post',\n                url: this.$store.getters.getAddr + ':' + this.$store.getters.getPort + '/api/user/signup',\n                data:  {\n                    // recuperer les infos du store\n                    email: this.$store.getters.getEmail,\n                    phone: this.$store.getters.getPhone,\n                    phoneCode: this.phoneCode,\n                    emailCode: this.emailCode\n                }\n            })\n            .then(response => {\n                console.log(response);\n                // this.$router.push('/create/user/verification');                \n            })\n            .catch(error => {\n                 // TODO : afficher une erreur pour le client\n                console.log(error);            \n            })\n        }\n\n    }\n\n}\n</script>\n\n<style src=\"../styles/style_forms.css\"></style>\n\n"]}]}